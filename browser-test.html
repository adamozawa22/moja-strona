<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Retro Tester</title>
<link rel="stylesheet" href="style.css">
<style>
/* Minimal inline akordeon */
.accordion {
  cursor: pointer;
  width: 90%;
  max-width: 600px;
  margin: 10px auto;
  padding: 12px 20px;
  border-radius: 10px;
  background: linear-gradient(to bottom, #5bb8ff, #0078d7);
  color: #fff;
  font-weight: bold;
  text-align: left;
  border: none;
  outline: none;
  transition: 0.3s;
}

.accordion:hover {
  background: linear-gradient(to bottom, #6bc0ff, #1c7fe0);
}

.panel {
  display: none;
  width: 90%;
  max-width: 600px;
  margin: 0 auto 15px auto;
  background: rgba(0,120,215,0.15);
  padding: 15px;
  border-radius: 10px;
  overflow: hidden;
}
</style>
</head>
<body>

<h1 style="text-align:center;"><img src="logo.gif" alt="LOGO" style="max-width:300px;width:80%;height:auto;"></h1>

<!-- Kategorie / akordeon -->
<button class="accordion">ğŸ¥ Kamera</button>
<div class="panel">
  <button id="startCam">WÅ‚Ä…cz kamerÄ™</button>
  <button id="stopCam">WyÅ‚Ä…cz</button><br>
  <video id="camPreview" autoplay muted playsinline style="width:100%;height:auto;"></video>
</div>

<button class="accordion">ğŸ™ï¸ Nagrywanie Audio</button>
<div class="panel">
  <button id="startRec">Start nagrywania</button>
  <button id="stopRec">Stop nagrywania</button><br>
  <audio id="audioPlayback" controls style="width:100%;"></audio>
</div>

<button class="accordion">ğŸ“¸ ZdjÄ™cie z Odliczaniem</button>
<div class="panel">
  <button id="takeShot">ZrÃ³b zdjÄ™cie</button>
  <div id="countdown" style="font-size:2em;color:red;display:none;">3</div>
  <video id="shotPreview" autoplay muted playsinline style="width:100%;height:auto;"></video>
  <canvas id="photoCanvas" style="width:100%;height:auto;"></canvas>
</div>

<button class="accordion">ğŸ¬ Test Wideo</button>
<div class="panel">
  <video id="localVideo" controls style="width:100%;height:auto;">
    <source src="sample.mp4" type="video/mp4">
  </video>
</div>

<button class="accordion">ğŸµ Test Audio</button>
<div class="panel">
  <audio id="localAudio" controls style="width:100%;"></audio>
</div>

<button class="accordion">â–¶ï¸ YouTube Player</button>
<div class="panel">
  <iframe src="https://www.youtube.com/embed/dQw4w9WgXcQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen style="width:100%;height:auto;"></iframe>
</div>

<button class="accordion">ğŸŒ Internet & Ping</button>
<div class="panel">
  <button id="pingTest">Test Pingu</button>
  <div id="netStatus">Kliknij "Test Pingu".</div>
</div>

<button class="accordion">ğŸ“œ Log</button>
<div class="panel">
  <div id="results" style="width:100%;height:150px;overflow-y:auto;background:#eee;font-family:monospace;padding:5px;">Log startuje...</div>
</div>

<hr>
<p style="text-align:center;"><img src="linuxnow.jpg" alt="Linux Now!" width="88" height="31"></p>
<p style="text-align:center;"><small>2025-2025 Moja Strona Retro</small></p>

<script>
// Akordeon
const acc = document.getElementsByClassName("accordion");
for(let i=0;i<acc.length;i++){
  acc[i].addEventListener("click",function(){
    this.classList.toggle("active");
    const panel=this.nextElementSibling;
    panel.style.display=(panel.style.display==="block")?"none":"block";
  });
}

// JS z poprzedniego kodu
const logBox=document.getElementById('results');
function log(m){logBox.textContent+="\n"+m;}

// ğŸ¥ Kamera + mic
let camStream=null;
startCam.onclick=async()=>{
  try{
    camStream=await navigator.mediaDevices.getUserMedia({video:true,audio:true});
    camPreview.srcObject=camStream;
    log("Kamera + mic OK");
  }catch(e){log("BÅ‚Ä…d: "+e);}
};
stopCam.onclick=()=>{
  if(camStream){camStream.getTracks().forEach(t=>t.stop());camPreview.srcObject=null;log("WyÅ‚Ä…czono kamerÄ™");}
};

// ğŸ™ï¸ Nagrywanie audio
let mediaRecorder, audioChunks=[];
startRec.onclick=async()=>{
  try{
    const stream=await navigator.mediaDevices.getUserMedia({audio:true});
    mediaRecorder=new MediaRecorder(stream);
    audioChunks=[];
    mediaRecorder.ondataavailable=e=>audioChunks.push(e.data);
    mediaRecorder.onstop=()=>{
      const blob=new Blob(audioChunks,{type:'audio/webm'});
      audioPlayback.src=URL.createObjectURL(blob);
      log("Nagranie gotowe");
    };
    mediaRecorder.start();
    log("Nagrywanie...");
  }catch(e){log("Mic error: "+e);}
};
stopRec.onclick=()=>{
  if(mediaRecorder&&mediaRecorder.state==="recording"){mediaRecorder.stop();log("Stop nagrywania");}
};

// ğŸ“¸ Auto-zdjÄ™cie z odliczaniem
const countdown=document.getElementById('countdown');
const shotPreview=document.getElementById('shotPreview');
let shotStream=null;
takeShot.onclick=async()=>{
  try{
    shotStream=await navigator.mediaDevices.getUserMedia({video:true});
    shotPreview.srcObject=shotStream;
    countdown.style.display="block";
    let time=3;
    countdown.textContent=time;
    const timer=setInterval(()=>{
      time--;
      if(time>0){countdown.textContent=time;}
      else{
        clearInterval(timer);
        countdown.style.display="none";
        capturePhoto();
      }
    },1000);
  }catch(e){log("BÅ‚Ä…d kamery: "+e);}
};

function capturePhoto(){
  const canvas=document.getElementById('photoCanvas');
  const ctx=canvas.getContext('2d');
  ctx.drawImage(shotPreview,0,0,canvas.width,canvas.height);
  log("ğŸ“¸ ZdjÄ™cie zrobione!");
  if(shotStream){
    shotStream.getTracks().forEach(t=>t.stop());
    shotPreview.srcObject=null;
    log("Kamera wyÅ‚Ä…czona po zdjÄ™ciu");
  }
}

</script>

</body>
</html>
